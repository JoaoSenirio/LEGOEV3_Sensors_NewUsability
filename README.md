# Sensores Lego EV3: nova possibilidade de uso 

## Resumo 

## Motivação

## O processo

Inicialmente, em busca de informações técnicas sobre os sensores e sobre toda a coleção LEGO MINDSTORM EV3, encontrei ampla documentação — nomeada Developer Kit — fornecida pela própria LEGO, que versa sobre *Firwmare, Hardware e Comunicação*, podendo ser acessada [neste link.](https://education.lego.com/en-us/product-resources/mindstorms-ev3/downloads/developer-kits) As informações mais relevantes para a execução do projeto encontram-se na seção *Hardware*, a qual mantive anexada ao repositório.

Para o desenvolvimento do projeto, os sensores de toque, luz/cor e infravermelho — os quais eram os disponíveis no momento — foram usados nos testes e nas etapas seguintes. Com o intuito de estabelecer conexão física com os sensores, para assim compreender a comunicação entre eles e o *brick* e mais tarde realizá-la sem o *brick*, foi preciso a construção de uma placa adaptadora, a qual contou com o conector específico da coleção EV3: 6 wire RJ-12 *right side*. No exterior, tal conector pode ser facilmente encontrado em lojas de varejo, como o AliExpress, porém, no Brasil, apesar da sua comercialização ser mais rara, pode ser encontrado em lojas como a [RoboCore.](https://www.robocore.net/) A placa adaptadora, confeccionada em placa perfurada, surgiu como alternativa à protoboard, uma vez que a robustez e a confiabilidade das ligações na nova montagem cessaram as interferências e a perda de dados.

A placa adaptadora ainda conta com resistor de pull-up no pino 1 e de pull-down no pino 6. O pino 1 é responsável pela identificação da conexão do sensor e a qual tipo ele pertence, isto é, permite a diferenciação entre o estado de disconectado, de sensor simples ADC conectado ou de sensor digital conectado. Sendo assim, por meio das ligações internas dos sensores relativas ao pino 1 associadas ao resistor de pull-up externo, são percebidas distintas tensões entre cada estado — 5v para disconectado, —v para sensor simples ADC conectado e 0v para sensor digital conectado —, as quais, quando tratadas por portas analógicas ou conversores ADC, permitem a identificação dos sensores. 

Com a placa montada, o mapeamento dos pinos dela foi realizado seguindo os esquemáticos dos sensores — visando identificar pinos como GND, VCC e UART TX/RX. Com isso, foi possível conectar os sensores ao analisador lógico USB, semelhante a esse do [link](https://www.usinainfo.com.br/testadores-e-medidores-diversos/analisador-logico-24mhz-8ch-al24-2691.html), permitindo conhecer/analisar os pacotes de dados enviados por eles. Tais pacotes foram interpretados com o auxílio do *software* [Logic 2](https://www.saleae.com/downloads/) (da Saleae), da documentação oficial da LEGO e da documentação do projeto LeJOS, o qual conduziu uma análise do [Protocolo dos Sensores UART.](https://sourceforge.net/p/lejos/wiki/UART%20Sensor%20Protocol/) Maiores detalhes sobre a comunicação UART, capturas do analisador lógico e a interpretação dos pacotes encontram-se na devida pasta.